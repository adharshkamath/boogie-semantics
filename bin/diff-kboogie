#!/usr/bin/env bash
# Usage: $0  <expected> <k-output>

boogie_expected=$1; shift
actual=$1; shift
[[ $# -eq 0 ]] || { echo 'Too many arguments'; exit 1 ; }

diff --color <(grep Error $boogie_expected | grep -v '#failure'  | sed -e 's/^[a-zA-Z0-9\/]*\.bpl//g' | sort) \
             <(grep Error $actual                                | sed -e 's/^[a-zA-Z0-9\/]*\.bpl//g' \
                                                                       -e 's/hold on entry.//g' \
                                                                       -e 's/be maintained by the loop.//g' \
                                                                 | sort)
